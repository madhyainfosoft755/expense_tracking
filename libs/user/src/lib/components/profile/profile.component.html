<p-breadcrumb [model]="breadcrumbItems"></p-breadcrumb>
<div class="grid grid-cols-12 gap-8">
    <div class="col-span-12">
        <div class="card">
            <p-fieldset legend="Update Profile" [toggleable]="false">
                <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" autocomplete="off">
                    @for (message of messages(); track message; let first = $first) {
                      <p-message [life]="message.life" closable [severity]="message.severity" [text]="message.content" styleClass="mb-2 mt-2" />
                    }
                    <div class="p-fluid grid grid-cols-12 gap-8">
                
                        <!-- salutation Dropdown -->
                        <!-- <div class="field col-12  sm:col-2">
                            <label for="salutation">Salutation <span class="text-red-500">*</span></label>
                            <p-select
                            id="salutation"
                            [options]="salutationOptions"
                            formControlName="salutation"
                            placeholder="Select salutation"
                            optionLabel="label"
                            optionValue="value"
                            />
                            <small *ngIf="submitted && profileForm.controls['salutation'].invalid" class="text-red-500">
                            salutation is required.
                            </small>
                        </div> -->
                  
                      <!-- First Name -->
                      <div class="field col-span-12 sm:col-span-4">
                        <label for="first-name" class="mr-2 block">First Name <span class="text-red-500">*</span></label>
                        <input id="first-name" type="text" maxlength="255" pInputText formControlName="first_name" placeholder="First Name" />
                        <small
                          *ngIf="profileForm.controls['first_name'].touched && profileForm.controls['first_name'].errors?.['required']"
                          class="text-red-500 block mt-1"
                        >
                          First name is required.
                        </small>
                        <small
                          *ngIf="profileForm.controls['first_name'].touched && profileForm.controls['first_name'].errors?.['minlength']"
                          class="text-red-500 block mt-1"
                        >
                          First name must be at least 2 characters long.
                        </small>
                        <small
                          *ngIf="profileForm.controls['first_name'].touched && profileForm.controls['first_name'].errors?.['maxlength']"
                          class="text-red-500 block mt-1"
                        >
                          First name must be under 255 characters.
                        </small>
                      </div>

                      <!-- Last Name -->
                      <div class="field col-span-12 sm:col-span-4">
                        <label for="last-name" class="mr-2 block">Last Name <span class="text-red-500">*</span></label>
                        <input id="last-name" type="text" maxlength="255" pInputText formControlName="last_name" placeholder="Last Name" />
                        <small
                          *ngIf="profileForm.controls['last_name'].touched && profileForm.controls['last_name'].errors?.['required']"
                          class="text-red-500 block mt-1"
                        >
                          Last name is required.
                        </small>
                        <small
                          *ngIf="profileForm.controls['last_name'].touched && profileForm.controls['last_name'].errors?.['minlength']"
                          class="text-red-500 block mt-1"
                        >
                          Last name must be at least 2 characters long.
                        </small>
                        <small
                          *ngIf="profileForm.controls['last_name'].touched && profileForm.controls['last_name'].errors?.['maxlength']"
                          class="text-red-500 block mt-1"
                        >
                          Last name must be under 255 characters.
                        </small>
                      </div>
                  
                      <!-- Email -->
                      <div class="field col-span-12 sm:col-span-4">
                        <label for="email" class="mr-2 block">Email <span class="text-red-500">*</span></label>
                        <input id="email" type="email" maxlength="255" pInputText formControlName="email" placeholder="Enter Email" />
                        <small
                          *ngIf="profileForm.controls['email'].touched && profileForm.controls['email'].errors?.['required']"
                          class="text-red-500 block mt-1"
                        >
                          Email is required.
                        </small>
                        <small
                          *ngIf="profileForm.controls['email'].touched && profileForm.controls['email'].errors?.['email']"
                          class="text-red-500 block mt-1"
                        >
                          Please enter a valid email address.
                        </small>
                        <small
                          *ngIf="profileForm.controls['email'].touched && profileForm.controls['email'].errors?.['maxlength']"
                          class="text-red-500 block mt-1"
                        >
                          Email must be under 255 characters.
                        </small>
                      </div>
                  
                      <!-- Username -->
                      <div class="field col-span-12 sm:col-span-4">
                        <label for="username" class="mr-2 block">Username <span class="text-red-500">*</span></label>
                        <input id="username" type="text" maxlength="255" pInputText formControlName="username" placeholder="Enter Username" />
                        <small
                          *ngIf="profileForm.controls['username'].touched && profileForm.controls['username'].errors?.['required']"
                          class="text-red-500 block mt-1"
                        >
                          Username is required.
                        </small>
                        <small
                          *ngIf="profileForm.controls['username'].touched && profileForm.controls['username'].errors?.['minlength']"
                          class="text-red-500 block mt-1"
                        >
                          Username must be at least 2 characters long.
                        </small>
                        <small
                          *ngIf="profileForm.controls['username'].touched && profileForm.controls['username'].errors?.['maxlength']"
                          class="text-red-500 block mt-1"
                        >
                          Username must be under 255 characters.
                        </small>
                      </div>

                      <!-- Mobile Number -->
                      <div class="field col-span-12 sm:col-span-4">
                        <label for="mobile_number" class="mr-2 block">Mobile Number <span class="text-red-500">*</span></label>
                        <input id="mobile_number" type="text" maxlength="10" (input)="checkPhone('mobile_number')" pInputText formControlName="mobile_number" placeholder="Enter Mobile Number" />
                        <small
                          *ngIf="profileForm.controls['mobile_number'].touched && profileForm.controls['mobile_number'].errors?.['required']"
                          class="text-red-500 block mt-1"
                        >
                          Mobile number is required.
                        </small>
                        <small
                          *ngIf="profileForm.controls['mobile_number'].touched && profileForm.controls['mobile_number'].errors?.['maxlength']"
                          class="text-red-500 block mt-1"
                        >
                          Mobile number must be 10 digits long.
                        </small>
                        <small
                          *ngIf="profileForm.controls['mobile_number'].touched && profileForm.controls['mobile_number'].errors?.['pattern']"
                          class="text-red-500 block mt-1"
                        >
                          Please enter a valid 10-digit number.
                        </small>
                      </div>

                      <!-- Employee ID -->
                      <div class="field col-span-12 sm:col-span-4" *ngIf="user && user.employee_id">
                        <label for="employee_id" class="mr-2 block">Employee Id <span class="text-red-500">*</span></label>
                        <input [disabled]="true" id="employee_id" [value]="user.employee_id" type="text" maxlength="25" pInputText placeholder="Enter Employee ID" />
                      </div>
                        
                    </div>
                    <div class="flex items-center mt-2">
                        <p-button type="submit" [loading]="loading" pRipple [disabled]="profileForm.invalid || loading" label="Update" class="mr-3" />
                        <p-progressSpinner strokeWidth="4" *ngIf="loadingProfile" [style]="{ width: '30px', height: '30px', 'margin': '0 auto 0 0' }"  />
                    </div>
                </form>
            </p-fieldset>
        </div>
    </div>
</div>