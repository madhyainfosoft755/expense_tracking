<p-breadcrumb [model]="breadcrumbItems"></p-breadcrumb>
<div class="card">
    <div class="font-semibold text-xl mb-4">
      <p-button (click)="addAmtReceived()" icon="pi pi-plus" label="Add New" [raised]="true" severity="info" />
    </div>
    <p-table [value]="data" showGridlines stripedRows size="small" [loading]="loading" [paginator]="true" [rows]="10">
        <ng-template pTemplate="header">
          <tr>
            <th style="width:45px">SN</th>
            <th>Paid By</th>
            <th>Vendor Name</th>
            <th>Expense Head</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Date</th>
            <!-- <th>Created At</th> -->
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
          <tr>
            <td>{{ rowIndex+1 }}</td>
            <td>{{ row.expense_expense_by.first_name }} {{row.expense_expense_by.last_name}}</td>
            <td>{{ row.vendor_name }}</td>
            <td>{{ row.expense_head.name }}</td>
            <td>{{ row.description }}</td>
            <td>{{ row.amount }}</td>
            <td>{{ row.date | date:'dd-MM-yyyy' }}</td>
            <!-- <td>{{ row.timestamp | date:'dd-MM-yyyy' }}</td> -->
          </tr>
        </ng-template>
    </p-table>
</div>
  
<p-confirmDialog></p-confirmDialog>
<p-dialog header="Add New" (onHide)="cancelEHEditModal()" [(visible)]="displayEHEditModal" [modal]="true" [closable]="true"  [style]="{width: '300px'}">
  <form [formGroup]="amtReceivedFrom" (ngSubmit)="onSubmit()" class="p-fluid">
    <div class="grid grid-cols-2 gap-6">

      <!-- Date -->
      <div class="field">
        <label class="block" for="date">Date</label>
        <p-datepicker id="date" appendTo="body" placeholder="Date" formControlName="date" styleClass="w-full" dateFormat="dd-mm-yy"/>
        <small *ngIf="amtReceivedFrom.get('date')?.invalid && amtReceivedFrom.get('date')?.touched" class="p-error">
          Date is required and must be under 255 characters.
        </small>
      </div>

      <!-- Amount -->
      <div class="field">
        <label class="block" for="amount">Amount</label>
        <input id="amount" placeholder="Amount" pInputText formControlName="amount" styleClass="w-full" />
        <small *ngIf="amtReceivedFrom.get('amount')?.invalid && amtReceivedFrom.get('amount')?.touched" class="p-error">
          Amount is required.
        </small>
      </div>

      <!-- Vendor -->
      <div class="field">
        <label class="block" for="vendor_name">Vendor Name</label>
        <input id="vendor_name" placeholder="Vendor Name" pInputText formControlName="vendor_name" styleClass="w-full" />
        <small *ngIf="amtReceivedFrom.get('vendor_name')?.invalid && amtReceivedFrom.get('vendor_name')?.touched" class="p-error">
          Vendor Name is required.
        </small>
      </div>

      <!-- description -->
      <div class="field">
        <label class="block" for="description">Description</label>
        <input id="description" placeholder="Received From User" pInputText formControlName="description" styleClass="w-full" />
        <small *ngIf="amtReceivedFrom.get('description')?.invalid && amtReceivedFrom.get('description')?.touched" class="p-error">
          Name is required and must be under 255 characters.
        </small>
      </div>
  
      <!-- Expense Head -->
      <div class="field">
        <label class="block" for="expense_head">Expense Head</label>
        <p-select 
            [options]="expenseHeads" 
            formControlName="expense_head"
            optionLabel="name"
            optionValue="id" 
            placeholder="Select" 
            appendTo="body" 
            class="w-full"
            [filter]="true" 
            filterBy="name"  />

        <small *ngIf="amtReceivedFrom.get('expense_head')?.invalid && amtReceivedFrom.get('expense_head')?.touched" class="p-error">
          User is required.
        </small>
      </div>
    </div>

    <!-- Submit -->
    <div class="field mt-3 text-right">
      <p-button type="submit" label="Add" [disabled]="amtReceivedFrom.invalid" />
    </div>

  </form>
</p-dialog>
